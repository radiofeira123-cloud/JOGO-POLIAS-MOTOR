<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Correia Escape Room</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    overflow: hidden;
  }

  #game {
    width: 100vw;
    height: 100vh;
    position: relative;
  }

  .scene {
    display: none;
    width: 100%;
    height: 100%;
    position: absolute;
    padding: 20px;
  }

  .active {
    display: block;
  }

  h1 {
    text-align: center;
    margin-bottom: 20px;
  }

  #panel {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(0,0,0,0.7);
    padding: 15px;
    font-size: 18px;
    text-align: center;
    height: 120px;
  }

  .polia {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 8px solid #666;
    position: absolute;
    background: radial-gradient(circle, #555 0%, #222 100%);
  }

  #correia {
    position: absolute;
    height: 25px;
    background: #222;
    border: 3px solid #555;
    border-radius: 10px;
    cursor: grab;
    transition: 0.1s;
  }

  .inputBox {
    background: #222;
    color: #fff;
    padding: 8px;
    border: 1px solid #555;
    margin-top: 10px;
    width: 120px;
    text-align: center;
    border-radius: 6px;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  .btn {
    display: block;
    margin: 15px auto;
    padding: 10px 20px;
    font-size: 18px;
    background: #333;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }

  .btn:hover {
    background: #555;
  }

  svg {
    position: absolute;
    top: 150px;
    left: 50%;
    transform: translateX(-50%);
    width: 600px;
    height: 300px;
  }
</style>
</head>
<body>
<div id="game">

<!-- ===================== -->
<!-- ====== SALA 1 ====== -->
<!-- ===================== -->
<div id="sala1" class="scene active">
  <h1>üõ†Ô∏è Fase 1 ‚Äî Tens√£o da Correia Auxiliar</h1>
  <svg id="motor">
    <circle id="poliaEsq" class="polia" cx="150" cy="150" r="50"></circle>
    <circle id="poliaDir" class="polia" cx="450" cy="150" r="50"></circle>
    <rect id="correia" x="200" y="140" width="250" height="25"></rect>
  </svg>
  <div id="panel">
    Arraste a correia para ajustar a tens√£o. <br>
    F√≥rmula: T = F / 2 <br>
    Tens√£o necess√°ria: 70 N
  </div>
</div>

<!-- ===================== -->
<!-- ====== SALA 2 ====== -->
<!-- ===================== -->
<div id="sala2" class="scene">
  <h1>‚öôÔ∏è Fase 2 ‚Äî Sincroniza√ß√£o da Correia Dentada</h1>
  <p>O virabrequim gira a <b>1200 rpm</b> com raio de 3 cm. A polia do comando tem 6 cm. Qual a rota√ß√£o do comando?</p>
  <input id="rpmComando" class="inputBox" placeholder="rpm">
  <button class="btn" onclick="checkSala2()">Confirmar</button>
  <div id="panel2"></div>
</div>

<!-- ===================== -->
<!-- ====== SALA 3 ====== -->
<!-- ===================== -->
<div id="sala3" class="scene">
  <h1>üîß Fase 3 ‚Äî Torque da Polia</h1>
  <p>Torque necess√°rio: 45 Nm. Chave: 0,25 m. Qual a for√ßa m√≠nima?</p>
  <input id="forcaTorque" class="inputBox" placeholder="N">
  <button class="btn" onclick="checkSala3()">Confirmar</button>
  <div id="panel3"></div>
</div>

<!-- ===================== -->
<!-- ====== SALA 4 ====== -->
<!-- ===================== -->
<div id="sala4" class="scene">
  <h1>üíß Fase 4 ‚Äî Pot√™ncia da Bomba</h1>
  <p>P = œÑ √ó œâ. Pot√™ncia: 0,45 kW, torque: 1,5 Nm. Qual a rota√ß√£o m√≠nima?</p>
  <input id="rotacaoBomba" class="inputBox" placeholder="rad/s">
  <button class="btn" onclick="checkSala4()">Confirmar</button>
  <div id="panel4"></div>
</div>

<!-- ===================== -->
<!-- ====== SALA 5 ====== -->
<!-- ===================== -->
<div id="sala5" class="scene">
  <h1>üî• Fase 5 ‚Äî Atrito da Correia</h1>
  <p>Fmax = Œº √ó N. Atrito m√°ximo: 60 N. For√ßa requerida: 55 N. A correia escorrega?</p>
  <input id="escorrega" class="inputBox" placeholder="sim / nao">
  <button class="btn" onclick="checkSala5()">Confirmar</button>
  <div id="panel5"></div>
</div>

<!-- ===================== -->
<!-- ====== FINAL ======= -->
<!-- ===================== -->
<div id="final" class="scene">
  <h1>üöóüí® Parab√©ns!</h1>
  <p>O carro liga, as correias funcionam, o motor gira suave.</p>
  <h2>üîì A porta da oficina se abre, voc√™ escapou!</h2>
</div>

</div>

<script>
/* =====================
   SALA 1 ‚Äî TENS√ÉO
===================== */
let correia = document.getElementById("correia");
let dragging = false;
let offsetX = 0;
const MIN = 480;
const MAX = 520;

correia.addEventListener("mousedown", e=>{
  dragging=true; offsetX=e.clientX - correia.getBoundingClientRect().x;
  correia.style.cursor="grabbing";
});
document.addEventListener("mouseup", ()=>dragging=false);
document.addEventListener("mousemove", e=>{
  if(dragging){
    let x = e.clientX - offsetX;
    if(x<0) x=0; if(x>600) x=600;
    correia.setAttribute("x", x);
    checkTension(x);
  }
});
function checkTension(x){
  let panel=document.getElementById("panel");
  if(x>=MIN && x<=MAX){
    panel.innerHTML="‚úî Tens√£o perfeita! Clique para ir √† fase 2.";
    panel.style.background="rgba(0,200,0,0.6)";
    panel.onclick=()=>changeScene("sala2");
  }else if(x<MIN){
    panel.innerHTML="‚ùå Correia frouxa, escorrega!";
    panel.style.background="rgba(200,0,0,0.4)";
  }else{
    panel.innerHTML="‚ùå Correia muito esticada!";
    panel.style.background="rgba(200,0,0,0.4)";
  }
}

/* =====================
   SALA 2
===================== */
function checkSala2(){
  let v=Number(document.getElementById("rpmComando").value);
  if(v===600){
    document.getElementById("panel2").innerHTML="‚úî Correto! 600 rpm.<br><button class='btn' onclick='changeScene(\"sala3\")'>Ir para a fase 3</button>";
  }else{
    document.getElementById("panel2").innerHTML="‚ùå Errado. Tente novamente.";
  }
}

/* =====================
   SALA 3
===================== */
function checkSala3(){
  let v=Number(document.getElementById("forcaTorque").value);
  if(v===180){
    document.getElementById("panel3").innerHTML="‚úî Correto! 180 N.<br><button class='btn' onclick='changeScene(\"sala4\")'>Ir para a fase 4</button>";
  }else{
    document.getElementById("panel3").innerHTML="‚ùå Errado. Tente novamente.";
  }
}

/* =====================
   SALA 4
===================== */
function checkSala4(){
  let v=Number(document.getElementById("rotacaoBomba").value);
  if(v===300){
    document.getElementById("panel4").innerHTML="‚úî Correto! 300 rad/s.<br><button class='btn' onclick='changeScene(\"sala5\")'>Ir para a fase 5</button>";
  }else{
    document.getElementById("panel4").innerHTML="‚ùå Errado. Tente novamente.";
  }
}

/* =====================
   SALA 5
===================== */
function checkSala5(){
  let v=document.getElementById("escorrega").value.toLowerCase();
  if(v==="nao" || v==="n√£o"){
    document.getElementById("panel5").innerHTML="‚úî Correto! A correia n√£o escorrega.<br><button class='btn' onclick='changeScene(\"final\")'>Finalizar</button>";
  }else{
    document.getElementById("panel5").innerHTML="‚ùå Errado. Tente novamente.";
  }
}

/* =====================
   Troca de fases
===================== */
function changeScene(id){
  document.querySelectorAll(".scene").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>
